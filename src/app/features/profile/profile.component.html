<!-- <ng-container *ngIf="{ user: user$ | async, loading: loading$ | async, initials: userInitials$ | async } as data">
  <div *ngIf="data.loading && !data.user" class="text-center p-4">
    <i class="pi pi-spin pi-spinner" style="font-size: 2rem"></i>
    <p>Cargando perfil...</p>
  </div>

  <div *ngIf="data.user as user" class="profile-page">
    <div class="grid">
      <div class="col-12 md:col-5 lg:col-4">
        <orb-card>
          <div header class="text-center p-4">
            <p-avatar [label]="data.initials || 'U'" styleClass="p-avatar-xl" shape="circle"></p-avatar>
            <h3 class="mt-3 mb-1">{{ user.name }} {{ user.lastName }}</h3>
            <p class="mt-0 text-color-secondary">{{ user.email }}</p>
            <p-tag [value]="user.isActive ? 'Activo' : 'Inactivo'" [severity]="user.isActive ? 'success' : 'danger'"></p-tag>
          </div>
          <div body class="p-4">
            <p-fieldset legend="Roles y Permisos" [toggleable]="true">
              <strong>Roles:</strong>
              <div class="flex flex-wrap gap-2 mt-2 mb-3">
                <p-chip *ngFor="let role of user.roles" [label]="role.name" icon="pi pi-shield"></p-chip>
              </div>
              <strong>Permisos:</strong>
              <ul class="list-none p-0 m-0 mt-2">
                 <li class="flex align-items-center py-1"><i [class]="'pi ' + (user.canManageAgenda ? 'pi-check text-green-500' : 'pi-times text-red-500')" class="mr-2"></i> Gestionar Agenda</li>
                 <li class="flex align-items-center py-1"><i [class]="'pi ' + (user.canManageClients ? 'pi-check text-green-500' : 'pi-times text-red-500')" class="mr-2"></i> Gestionar Clientes</li>
                 <li class="flex align-items-center py-1"><i [class]="'pi ' + (user.canManageProducts ? 'pi-check text-green-500' : 'pi-times text-red-500')" class="mr-2"></i> Gestionar Productos</li>
                 <li class="flex align-items-center py-1"><i [class]="'pi ' + (user.canManageUsers ? 'pi-check text-green-500' : 'pi-times text-red-500')" class="mr-2"></i> Gestionar Usuarios</li>
              </ul>
            </p-fieldset>
          </div>
        </orb-card>
      </div>

      <div class="col-12 md:col-7 lg:col-8">
        <orb-card>
          <div header class="p-4 border-bottom-1 surface-border">
            <h3 class="m-0">Editar Informaci√≥n</h3>
          </div>
          <div body class="p-4">
            <form [formGroup]="profileForm" (ngSubmit)="onSubmit()">
              <div class="grid formgrid">
                <div class="field col-12 md:col-6">
                  <orb-form-field label="Nombre">
                    <orb-text-input formControlName="name" inputId="name"></orb-text-input>
                  </orb-form-field>
                </div>
                <div class="field col-12 md:col-6">
                  <orb-form-field label="Apellidos">
                    <orb-text-input formControlName="lastName" inputId="lastName"></orb-text-input>
                  </orb-form-field>
                </div>
                <div class="field col-12">
                   <orb-form-field label="Email">
                    <orb-text-input formControlName="email" inputId="email" type="email"></orb-text-input>
                  </orb-form-field>
                </div>
              </div>
              <div class="flex justify-content-end mt-4">
                <orb-button type="submit" label="Guardar Cambios" icon="pi pi-check" [loading]="data.loading"></orb-button>
              </div>
            </form>
          </div>
        </orb-card>
      </div>
    </div>
  </div>
</ng-container>
 -->