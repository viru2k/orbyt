<form [formGroup]="form" (ngSubmit)="accept()">
  <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
    <!-- Información Personal -->
    <orb-card>
      <div orbHeader>
        <h3 style="margin: 0; color: #374151; font-size: 1.125rem; font-weight: 600;">
          <i class="pi pi-user" style="margin-right: 0.5rem; color: #6366f1;"></i>
          Información Personal
        </h3>
      </div>
      <div orbBody>
        <orb-form-field>
          <orb-text-input
            formControlName="fullName"
            label="Nombre Completo"
            placeholder="Nombre completo del usuario"
            [required]="true"
          />
        </orb-form-field>

        <orb-form-field>
          <label for="isActive" class="form-label" style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: #374151;">Estado del Usuario</label>
          <div style="display: flex; align-items: center; gap: 0.5rem; padding: 0.75rem; background: #ffffff; border: 1px solid #d1d5db; border-radius: 0.5rem; box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);">
            <p-checkbox
              formControlName="isActive"
              inputId="isActive"
              [binary]="true"
            ></p-checkbox>
            <label for="isActive" style="margin: 0; font-weight: 500; color: #374151;">Usuario Activo</label>
          </div>
        </orb-form-field>
      </div>
    </orb-card>

    <!-- Roles y Permisos -->
    <orb-card>
      <div orbHeader>
        <h3 style="margin: 0; color: #374151; font-size: 1.125rem; font-weight: 600;">
          <i class="pi pi-shield" style="margin-right: 0.5rem; color: #10b981;"></i>
          Roles y Permisos
        </h3>
      </div>
      <div orbBody>
        <orb-form-field>
          <label for="roles" class="form-label" style="display: block; margin-bottom: 0.75rem; font-weight: 500; color: #374151;">Roles Asignados *</label>
          <div style="display: flex; flex-direction: column; gap: 0.75rem; max-height: 300px; overflow-y: auto; padding: 0.5rem;">
            <ng-container *ngFor="let role of (availableRoles$ | async)">
              <div [ngStyle]="{
                'display': 'flex',
                'align-items': 'flex-start',
                'gap': '0.75rem',
                'padding': '0.75rem',
                'background': '#ffffff',
                'border': '1px solid ' + (isRoleSelected(role.id) ? '#3b82f6' : '#d1d5db'),
                'border-radius': '0.5rem',
                'transition': 'all 0.2s',
                'box-shadow': isRoleSelected(role.id) ? '0 0 0 1px #3b82f6' : '0 1px 2px rgba(0, 0, 0, 0.05)'
              }">
                <p-checkbox
                  [inputId]="'role-' + role.id"
                  [value]="role.id"
                  (onChange)="onRoleChange(role.id, $event)"
                  [ngModel]="isRoleSelected(role.id)"
                  [ngModelOptions]="{standalone: true}"
                  [ngStyle]="{'margin-top': '0.125rem'}"
                ></p-checkbox>
                <div [ngStyle]="{'flex': '1'}">
                  <label [for]="'role-' + role.id" [ngStyle]="{'display': 'block', 'font-weight': '600', 'color': '#374151', 'margin-bottom': '0.25rem', 'cursor': 'pointer'}">
                    {{ role.name }}
                  </label>
                  <p [ngStyle]="{'margin': '0', 'font-size': '0.875rem', 'color': '#6b7280', 'line-height': '1.4'}">
                    {{ role.description }}
                  </p>
                </div>
              </div>
            </ng-container>
          </div>
        </orb-form-field>
      </div>
    </orb-card>
  </div>

  <!-- Footer con orb-form-footer -->
  <div style="margin-top: 1.5rem;">
    <orb-form-footer 
      [buttons]="footerButtons" 
      alignment="right"
      (actionClicked)="handleFooterAction($event)"
    ></orb-form-footer>
  </div>
</form>