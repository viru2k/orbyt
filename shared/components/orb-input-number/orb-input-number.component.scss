@use '../../../src/styles/_design-system.scss';

.orb-input {
  display: flex;
  flex-direction: column;
  gap: var(--space-1);

  &--full-width {
    width: 100%;
  }

  // Label
  &__label {
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-700);
    line-height: 1.4;
    display: block;
  }

  &__required {
    color: var(--error-500);
    margin-left: var(--space-1);
  }

  // Input Container
  &__container {
    position: relative;
    display: flex;
    align-items: center;
    background: #ffffff;
    border: 2px solid var(--gray-300);
    border-radius: var(--radius-md);
    transition: var(--transition-base);
    overflow: hidden;

    &:focus-within {
      border-color: var(--primary-500);
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }

    // Size variants
    &--sm {
      .orb-input__field {
        padding: var(--space-2) var(--space-3);
        font-size: var(--text-sm);
      }

      .orb-input__icon {
        font-size: var(--text-sm);
      }

      .orb-input__number-btn {
        width: var(--space-8);
        font-size: var(--text-xs);
      }
    }

    &--md {
      height: var(--project-input-height);

      .orb-input__field {
        padding: var(--space-3) var(--space-4);
        font-size: 14px;
        line-height: 1.2;
      }

      .orb-input__icon {
        font-size: 14px;
      }

      .orb-input__number-btn {
        width: var(--space-10);
        font-size: 12px;
      }
    }

    &--lg {
      .orb-input__field {
        padding: var(--space-4) var(--space-5);
        font-size: var(--text-lg);
      }

      .orb-input__icon {
        font-size: var(--text-lg);
      }

      .orb-input__number-btn {
        width: var(--space-12);
        font-size: var(--text-base);
      }
    }

    // Variant styles
    &--default {
      background: #ffffff;
      border-color: var(--gray-300);
    }

    &--filled {
      background: var(--gray-50);
      border-color: var(--gray-200);

      .orb-input__field {
        background: transparent;
      }
    }

    &--outlined {
      background: transparent;
      border-color: var(--gray-400);
      border-width: 2px;
    }

    // State modifiers
    &--disabled {
      background: var(--gray-100);
      border-color: var(--gray-200);
      cursor: not-allowed;

      .orb-input__field {
        cursor: not-allowed;
        color: var(--gray-500);
      }

      .orb-input__icon {
        color: var(--gray-400);
      }

      .orb-input__number-btn {
        cursor: not-allowed;
        opacity: 0.5;
      }
    }

    &--readonly {
      background: var(--gray-50);
      border-color: var(--gray-200);

      .orb-input__field {
        cursor: default;
      }

      .orb-input__number-btn {
        display: none;
      }
    }

    &--error {
      border-color: var(--error-500);

      &:focus-within {
        border-color: var(--error-500);
        box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
      }
    }

    // Icon positioning
    &--with-left-icon {
      .orb-input__field {
        padding-left: var(--space-10);
      }
    }

    &--with-right-icon {
      .orb-input__field {
        padding-right: var(--space-10);
      }
    }
  }

  // Input Field
  &__field {
    flex: 1;
    border: none;
    outline: none;
    background: transparent;
    font-family: var(--font-family-sans);
    color: var(--gray-900);
    line-height: 1.5;

    &::placeholder {
      color: var(--gray-400);
    }

    &:disabled {
      cursor: not-allowed;
      color: var(--gray-500);
    }

    // Number input specific styles
    &--number {
      text-align: right;

      // Hide Chrome's increment/decrement arrows
      &::-webkit-outer-spin-button,
      &::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }

      // Hide Firefox's increment/decrement arrows
      &[type=number] {
        -moz-appearance: textfield;
      }
    }
  }

  // Left and Right Sections
  &__left-section,
  &__right-section {
    display: flex;
    align-items: center;
    gap: var(--space-1);
  }

  // Icons
  &__icon {
    color: var(--gray-500);
    pointer-events: none;

    &--left {
      margin-left: var(--space-3);
    }

    &--right {
      margin-right: var(--space-3);
    }
  }

  // Number Buttons
  &__number-btn {
    background: var(--gray-100);
    border: none;
    color: var(--gray-600);
    cursor: pointer;
    transition: var(--transition-base);
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    border-radius: 0;

    &:hover:not(:disabled) {
      background: var(--gray-200);
      color: var(--gray-800);
    }

    &:active:not(:disabled) {
      background: var(--gray-300);
    }

    &:focus {
      outline: 2px solid var(--primary-300);
      outline-offset: -2px;
      z-index: 1;
    }

    &--left {
      border-top-left-radius: var(--radius-md);
      border-bottom-left-radius: var(--radius-md);
      margin-left: -2px;
    }

    &--right {
      border-top-right-radius: var(--radius-md);
      border-bottom-right-radius: var(--radius-md);
      margin-right: -2px;
    }

    &:disabled {
      cursor: not-allowed;
      opacity: 0.5;
    }
  }

  // Clear Button
  &__clear {
    background: none;
    border: none;
    padding: var(--space-1);
    color: var(--gray-400);
    cursor: pointer;
    border-radius: var(--radius-sm);
    transition: var(--transition-base);
    margin-right: var(--space-2);

    &:hover {
      color: var(--gray-600);
      background: var(--gray-100);
    }

    &:focus {
      outline: 2px solid var(--primary-300);
      outline-offset: 1px;
    }

    i {
      font-size: var(--text-sm);
    }
  }

  // Helper text
  &__helper {
    margin-top: var(--space-1);
  }

  &__help {
    font-size: var(--text-xs);
    color: var(--gray-600);
    line-height: 1.4;
  }

  &__error {
    font-size: var(--text-xs);
    color: var(--error-600);
    font-weight: var(--font-medium);
    line-height: 1.4;
  }

  // Dark theme support
  @media (prefers-color-scheme: dark) {
    &__label {
      color: var(--gray-300);
    }

    &__container {
      background: var(--gray-800);
      border-color: var(--gray-600);

      &:focus-within {
        border-color: var(--primary-400);
      }

      &--filled {
        background: var(--gray-900);
        border-color: var(--gray-700);
      }

      &--disabled {
        background: var(--gray-900);
        border-color: var(--gray-700);
      }

      &--readonly {
        background: var(--gray-900);
        border-color: var(--gray-700);
      }
    }

    &__field {
      color: var(--gray-100);

      &::placeholder {
        color: var(--gray-500);
      }

      &:disabled {
        color: var(--gray-600);
      }
    }

    &__icon {
      color: var(--gray-400);
    }

    &__number-btn {
      background: var(--gray-700);
      color: var(--gray-300);

      &:hover:not(:disabled) {
        background: var(--gray-600);
        color: var(--gray-100);
      }

      &:active:not(:disabled) {
        background: var(--gray-500);
      }
    }

    &__clear {
      color: var(--gray-500);

      &:hover {
        color: var(--gray-300);
        background: var(--gray-700);
      }
    }

    &__help {
      color: var(--gray-400);
    }

    &__error {
      color: var(--error-400);
    }
  }

  // Responsive adjustments
  @media (max-width: 768px) {
    &__container--lg {
      .orb-input__field {
        padding: var(--space-3) var(--space-4);
        font-size: var(--text-base);
      }

      .orb-input__number-btn {
        width: var(--space-10);
        font-size: var(--text-sm);
      }
    }
  }
}